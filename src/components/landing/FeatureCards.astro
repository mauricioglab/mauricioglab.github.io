---
/**
 * Feature Cards Component
 * Displays a grid of feature/service/methodology cards
 */

export interface FeatureCard {
  icon: string;
  title: string;
  description: string;
  color?: string;
}

interface Props {
  title: string;
  subtitle?: string;
  cards: FeatureCard[];
  columns?: 2 | 3 | 4;
  variant?: 'icon-box' | 'border-left' | 'emoji';
  bgColor?: string;
}

const { 
  title, 
  subtitle, 
  cards, 
  columns = 3, 
  variant = 'icon-box',
  bgColor = 'bg-slate-50 dark:bg-slate-800'
} = Astro.props;

const gridCols = {
  2: 'md:grid-cols-2',
  3: 'md:grid-cols-3',
  4: 'md:grid-cols-4',
};

// Map color strings to actual Tailwind classes
const getColorClasses = (color: string | undefined, type: 'bg' | 'border') => {
  const colorMap: Record<string, { bg: string; border: string }> = {
    'orange-600': { bg: 'bg-orange-600', border: 'border-orange-600' },
    'blue-600': { bg: 'bg-blue-600', border: 'border-blue-600' },
    'green-600': { bg: 'bg-green-600', border: 'border-green-600' },
    'purple-600': { bg: 'bg-purple-600', border: 'border-purple-600' },
    'slate-900': { bg: 'bg-slate-900', border: 'border-slate-900 dark:border-slate-400' },
    'emerald-600': { bg: 'bg-emerald-600', border: 'border-emerald-600' },
  };
  const defaultColor = { bg: 'bg-blue-600', border: 'border-slate-900 dark:border-slate-400' };
  return colorMap[color || '']?.[type] || defaultColor[type];
};
---

<section class:list={['py-20 transition-colors', bgColor]}>
  <div class="max-w-7xl mx-auto px-4">
    <div class="text-center mb-12">
      <h2 class="text-3xl font-bold mb-4 text-slate-900 dark:text-white">{title}</h2>
      {subtitle && (
        <p class="text-slate-600 dark:text-slate-400 max-w-2xl mx-auto">
          {subtitle}
        </p>
      )}
    </div>
    
    <div class:list={['grid gap-8', gridCols[columns]]}>
      {cards.map((card) => {
        if (variant === 'icon-box') {
          return (
            <div class="bg-white dark:bg-slate-900 p-8 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm hover:shadow-lg transition">
              <div class:list={['w-16 h-16 rounded-2xl flex items-center justify-center mb-6', getColorClasses(card.color, 'bg')]}>
                <i class={`${card.icon} text-white text-2xl`}></i>
              </div>
              <h3 class="text-xl font-bold mb-3 text-slate-900 dark:text-white">{card.title}</h3>
              <p class="text-slate-600 dark:text-slate-400">
                {card.description}
              </p>
            </div>
          );
        } else if (variant === 'border-left') {
          return (
            <div class:list={['bg-white dark:bg-slate-900 p-8 rounded-2xl border-l-4 shadow-sm', getColorClasses(card.color, 'border')]}>
              <div class="text-4xl mb-4">{card.icon}</div>
              <h3 class="text-xl font-bold mb-3 text-slate-900 dark:text-white">{card.title}</h3>
              <p class="text-slate-600 dark:text-slate-400">
                {card.description}
              </p>
            </div>
          );
        } else {
          // emoji variant
          return (
            <div class="bg-white dark:bg-slate-900 p-8 rounded-2xl border border-slate-200 dark:border-slate-700 shadow-sm">
              <div class="text-4xl mb-4">{card.icon}</div>
              <h3 class="text-xl font-bold mb-3 text-slate-900 dark:text-white">{card.title}</h3>
              <p class="text-slate-600 dark:text-slate-400">
                {card.description}
              </p>
            </div>
          );
        }
      })}
    </div>
  </div>
</section>
