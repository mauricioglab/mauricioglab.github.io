<div class="translator-container" aria-label="Language Translator Tool">
    <div class="trans-body">
        <div class="trans-controls">
            <select
                id="trans-direction"
                class="trans-select"
                aria-label="Select translation direction"
            >
                <option value="en-es">ENGLISH TO SPANISH</option>
                <option value="es-en">SPANISH TO ENGLISH</option>
            </select>
        </div>
        <textarea
            id="trans-input"
            placeholder="ENTER TEXT HERE..."
            class="trans-textarea"
            aria-label="Text to translate"></textarea>
        <div class="trans-display" id="trans-output" aria-live="polite">
            TRANSLATION WILL APPEAR HERE...
        </div>
        <div class="trans-buttons">
            <button id="trans-btn" class="trans-btn" aria-label="Translate text"
                >TRANSLATE</button
            >
            <button
                id="trans-clear"
                class="trans-btn btn-clear"
                aria-label="Clear translator">CLEAR</button
            >
        </div>
    </div>
</div>

<script>
    const transInput = document.getElementById(
        "trans-input",
    ) as HTMLTextAreaElement;
    const transDirection = document.getElementById(
        "trans-direction",
    ) as HTMLSelectElement;
    const transOutput = document.getElementById("trans-output");
    const transBtn = document.getElementById("trans-btn");
    const transClear = document.getElementById("trans-clear");

    async function translate() {
        if (!transInput || !transOutput || !transDirection) return;
        const text = transInput.value.trim();
        if (!text) return;
        transOutput.innerText = "PROCESSING...";
        const [from, to] = transDirection.value.split("-");
        try {
            const response = await fetch(
                `https://api.mymemory.translated.net/get?q=${encodeURIComponent(text)}&langpair=${from}|${to}`,
            );
            const data = await response.json();
            if (data.responseData) {
                transOutput.innerText =
                    data.responseData.translatedText;
            } else {
                transOutput.innerText = "ERROR: SYSTEM BUSY";
            }
        } catch (e) {
            console.error("Translation error", e);
            transOutput.innerText = "ERROR: NETWORK FAILURE";
        }
    }

    if (transBtn) transBtn.addEventListener("click", translate);
    if (transClear) {
        transClear.addEventListener("click", () => {
            if (transInput) transInput.value = "";
            if (transOutput)
                transOutput.innerText = "TRANSLATION WILL APPEAR HERE...";
        });
    }
</script>

<style>
    .translator-container {
        background-color: #333;
        border: 4px double #999;
        padding: 10px;
        margin: 20px auto;
        max-width: 600px;
        font-family: "Courier New", Courier, monospace;
        box-shadow: 5px 5px 0px #000;
    }

    .trans-body {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    .trans-select {
        width: 100%;
        background-color: #000;
        color: #0f0;
        border: 2px solid #0f0;
        padding: 5px;
        font-family: inherit;
        cursor: pointer;
    }

    .trans-textarea {
        width: 100%;
        height: 100px;
        background-color: #eee;
        color: #000;
        border: 2px inset #999;
        padding: 8px;
        font-family: inherit;
        font-size: 14px;
        resize: none;
        box-sizing: border-box;
    }

    .trans-display {
        min-height: 80px;
        background-color: #000;
        color: #0f0;
        border: 2px solid #0f0;
        padding: 10px;
        font-size: 14px;
        overflow-y: auto;
    }

    .trans-buttons {
        display: flex;
        gap: 10px;
    }

    .trans-btn {
        flex: 1;
        background-color: #ccc;
        border: 2px outset #fff;
        padding: 8px;
        font-family: inherit;
        font-weight: bold;
        cursor: pointer;
    }

    .trans-btn:active {
        border-style: inset;
    }

    .btn-clear {
        background-color: #900;
        color: #fff;
    }

    .trans-footer {
        margin-top: 10px;
        font-size: 9px;
        color: #777;
        text-align: right;
    }
</style>
