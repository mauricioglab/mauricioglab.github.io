---
/**
 * Metrics Grid Component
 * Displays results metrics in a colored grid
 */

export interface Metric {
  value: string;
  label: string;
}

type AccentColor = 'blue' | 'emerald' | 'purple' | 'orange';

interface Props {
  title: string;
  metrics: Metric[];
  learnings?: {
    title: string;
    items: Array<{ label: string; text: string }>;
  };
  accentColor: AccentColor;
}

const { title, metrics, learnings, accentColor } = Astro.props;

// Static color mappings for metric cards (cycling through colors)
const metricColorClasses = [
  { bg: 'bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30', border: 'border-blue-200 dark:border-blue-800', text: 'text-blue-600 dark:text-blue-400' },
  { bg: 'bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900/30 dark:to-emerald-800/30', border: 'border-emerald-200 dark:border-emerald-800', text: 'text-emerald-600 dark:text-emerald-400' },
  { bg: 'bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/30 dark:to-purple-800/30', border: 'border-purple-200 dark:border-purple-800', text: 'text-purple-600 dark:text-purple-400' },
  { bg: 'bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/30 dark:to-orange-800/30', border: 'border-orange-200 dark:border-orange-800', text: 'text-orange-600 dark:text-orange-400' },
];

// Color for learnings checkmarks based on accent
const checkColorClasses: Record<AccentColor, string> = {
  blue: 'text-blue-600 dark:text-blue-400',
  emerald: 'text-emerald-600 dark:text-emerald-400',
  purple: 'text-purple-600 dark:text-purple-400',
  orange: 'text-orange-600 dark:text-orange-400',
};

const checkColor = checkColorClasses[accentColor];
---

<section class="mb-16">
  <h2 class="text-3xl font-bold mb-6">{title}</h2>
  <div class="grid md:grid-cols-2 gap-6 mb-8">
    {metrics.map((metric, idx) => {
      const colorIdx = idx % metricColorClasses.length;
      const colors = metricColorClasses[colorIdx];
      return (
        <div class:list={['rounded-xl p-6 border', colors.bg, colors.border]}>
          <div class:list={['text-3xl font-bold mb-2', colors.text]}>{metric.value}</div>
          <div class="text-slate-700 dark:text-slate-300">{metric.label}</div>
        </div>
      );
    })}
  </div>
  
  {learnings && (
    <div class="bg-slate-50 dark:bg-slate-800 rounded-xl p-8 border border-slate-200 dark:border-slate-700">
      <h3 class="text-xl font-bold mb-4">{learnings.title}</h3>
      <ul class="space-y-3">
        {learnings.items.map(item => (
          <li class="flex items-start gap-3">
            <span class:list={['font-bold', checkColor]}>âœ“</span>
            <span><strong>{item.label}</strong> {item.text}</span>
          </li>
        ))}
      </ul>
    </div>
  )}
</section>
