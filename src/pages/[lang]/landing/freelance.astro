---
import ProfileLayout from '@layouts/ProfileLayout.astro';
import HeroSection from '@components/landing/HeroSection.astro';
import SkillsSection from '@components/landing/SkillsSection.astro';
import FeatureCards from '@components/landing/FeatureCards.astro';
import StatsGrid from '@components/landing/StatsGrid.astro';
import ExperienceTimeline from '@components/landing/ExperienceTimeline.astro';
import CTASection from '@components/landing/CTASection.astro';
import { profiles } from '@data/profiles';
import { getLanguagePaths } from '@utils/i18n-paths';
import { 
  type Lang, 
  useTranslations, 
  type CommonTranslations, 
  type ProfileTranslations 
} from '@i18n/index';

export const getStaticPaths = getLanguagePaths;

const { lang } = Astro.params as { lang: Lang };
const profile = profiles.freelance;
const t = await useTranslations<CommonTranslations>(lang, 'common');
const content = await useTranslations<ProfileTranslations>(lang, 'freelance');

// Services cards configuration - using specific colors for each card
const serviceCards = [
  { icon: 'fas fa-users', title: content.services?.title1 || '', description: content.services?.desc1 || '', color: 'orange-600' },
  { icon: 'fas fa-code', title: content.services?.title2 || '', description: content.services?.desc2 || '', color: 'blue-600' },
  { icon: 'fas fa-chart-line', title: content.services?.title3 || '', description: content.services?.desc3 || '', color: 'green-600' },
];

// Impact stats - using specific colors for each stat
const impactStats = [
  { value: '10+', label: lang === 'es' ? 'Años de experiencia' : 'Years of experience', color: 'orange-600' },
  { value: '50+', label: lang === 'es' ? 'Proyectos entregados' : 'Projects delivered', color: 'blue-600' },
  { value: '15+', label: lang === 'es' ? 'Equipos liderados' : 'Teams led', color: 'green-600' },
  { value: '100%', label: lang === 'es' ? 'Proyectos a tiempo' : 'On-time projects', color: 'purple-600' },
];

// Transform experience data for the component
const experiences = [
  { role: content.experience.role1, company: content.experience.company1, items: content.experience.items1 },
  { role: content.experience.role2, company: content.experience.company2, items: content.experience.items2 },
];

// CTA buttons configuration
const ctaButtons = [
  { text: content.hero.ctaPrimary, href: 'https://calendly.com/mauricio-gonzalez', icon: 'fas fa-calendar-alt', primary: true, external: true },
  { text: t.cta.downloadCV, href: profile.cvUrl, icon: 'fas fa-file-pdf' },
  { text: t.cta.connectLinkedIn, href: profile.linkedinUrl, icon: 'fab fa-linkedin', external: true },
];
---

<ProfileLayout title={content.title} profile={profile} lang={lang}>
  <!-- Hero -->
  <HeroSection profile={profile} lang={lang} />
  
  <!-- Servicios -->
  <FeatureCards
    title={lang === 'es' ? 'Servicios' : 'Services'}
    subtitle={content.projectsDescription}
    cards={serviceCards}
    columns={3}
    variant="icon-box"
  />
  
  <!-- Métricas de Impacto -->
  <StatsGrid
    title={lang === 'es' ? 'Impacto Cuantificado' : 'Quantified Impact'}
    stats={impactStats}
    columns={4}
  />
  
  <!-- Skills -->
  <SkillsSection profile={profile} lang={lang} />
  
  <!-- Experiencia -->
  <ExperienceTimeline 
    title={t.sections.experience}
    experiences={experiences}
    profileId="freelance"
  />
  
  <!-- CTA Final -->
  <CTASection
    title={content.ctaTitle}
    description={content.ctaDescription}
    buttons={ctaButtons}
    profileId="freelance"
    gradient={true}
  />
</ProfileLayout>
