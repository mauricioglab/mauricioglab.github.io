---
import type { Lang } from '../../../i18n';

export function getStaticPaths() {
  return [
    { params: { lang: 'es' } },
    { params: { lang: 'en' } }
  ];
}

const { lang } = Astro.params as { lang: Lang };

const t = {
  es: {
    back: '‚Üê Volver a proyectos',
    badge: 'Side Project - Arquitectura',
    title: 'Task Manager con DDD',
    description: 'Gestor de tareas implementado con Domain-Driven Design, CQRS y eventos de dominio. Proyecto educativo que demuestra patrones arquitect√≥nicos avanzados.',
    stats: {
      time: { value: '2 meses', label: 'Tiempo de desarrollo' },
      aggregates: { value: '8', label: 'Agregados de dominio' },
      coverage: { value: '100%', label: 'Test coverage' }
    },
    links: {
      demo: 'üåê Ver Demo en Vivo',
      github: 'üíª Ver en GitHub'
    },
    problem: {
      title: 'El Problema',
      intro: 'Quer√≠a profundizar en Domain-Driven Design y patrones arquitect√≥nicos avanzados. Necesitaba un proyecto que me permitiera:',
      items: [
        'Aplicar DDD con agregados, value objects y entidades de dominio',
        'Implementar CQRS separando lecturas y escrituras',
        'Usar eventos de dominio para comunicaci√≥n entre agregados',
        'Implementar especificaciones para queries complejas',
        'Lograr cobertura de tests del 100%'
      ]
    },
    process: {
      title: 'Mi Proceso',
      phases: [
        {
          title: '1. Event Storming & Modelado de Dominio',
          description: 'Comenc√© identificando los eventos de dominio y agregados:',
          details: [
            { name: 'Agregado Task:', desc: 'Ra√≠z del agregado con value objects (TaskId, Title, Description, Status)' },
            { name: 'Agregado Project:', desc: 'Contiene m√∫ltiples tareas, gestiona ciclo de vida' },
            { name: 'Eventos:', desc: 'TaskCreated, TaskCompleted, TaskAssigned, ProjectArchived' }
          ]
        },
        {
          title: '2. Implementaci√≥n de Agregados',
          description: 'Implement√© agregados con l√≥gica de negocio encapsulada:',
          items: ['Value Objects inmutables (TaskStatus, Priority, etc.)', 'M√©todos de dominio que validan reglas de negocio', 'Publicaci√≥n de eventos de dominio', 'Repositorios para persistencia']
        },
        {
          title: '3. CQRS & Event Sourcing',
          description: 'Separ√© lecturas y escrituras con CQRS:',
          items: ['Commands para cambios de estado (CreateTaskCommand, CompleteTaskCommand)', 'Queries para lecturas optimizadas (GetTasksByProjectQuery)', 'Event handlers que actualizan read models', 'Proyecciones para vistas denormalizadas']
        },
        {
          title: '4. Testing Exhaustivo',
          description: 'Implement√© tests en m√∫ltiples niveles:',
          items: ['Unit tests para agregados y value objects', 'Tests de dominio para reglas de negocio', 'Integration tests para handlers y repositorios', 'Tests de especificaciones para queries']
        }
      ]
    },
    solution: {
      title: 'La Soluci√≥n',
      layers: {
        title: 'Arquitectura de Capas',
        items: [
          { label: 'Domain Layer:', text: 'Agregados, Value Objects, Interfaces de repositorio, Eventos de dominio' },
          { label: 'Application Layer:', text: 'Commands, Queries, Handlers, DTOs, Mappers' },
          { label: 'Infrastructure Layer:', text: 'Implementaci√≥n de repositorios, Event Store, Proyecciones' },
          { label: 'Presentation Layer:', text: 'Controllers, API endpoints, Validaciones de entrada' }
        ]
      },
      patterns: {
        title: 'Patrones Implementados',
        items: [
          { name: 'Domain-Driven Design', desc: 'Agregados, Value Objects, Especificaciones, Repositorios' },
          { name: 'CQRS', desc: 'Separaci√≥n de Commands y Queries, Read Models' },
          { name: 'Event Sourcing', desc: 'Event Store, Proyecciones, Replay de eventos' },
          { name: 'Mediator Pattern', desc: 'MediatR para orquestaci√≥n de handlers' }
        ]
      },
      frontend: {
        title: 'Frontend - React',
        description: 'Interfaz moderna con React y gesti√≥n de estado:',
        items: ['React Hooks para state management', 'Componentes funcionales reutilizables', 'Integraci√≥n con API backend', 'Drag & drop para organizar tareas', 'Filtros y b√∫squeda en tiempo real']
      }
    },
    results: {
      title: 'Resultados & Impacto',
      metrics: [
        { value: '100%', label: 'Test Coverage', color: 'purple' },
        { value: '8', label: 'Agregados de Dominio', color: 'blue' },
        { value: '45+', label: 'Tests Unitarios', color: 'emerald' },
        { value: '0', label: 'Violaciones de reglas de negocio', color: 'orange' }
      ],
      learnings: {
        title: 'Aprendizajes Clave',
        items: [
          { label: 'DDD en profundidad:', text: 'Modelado de dominios complejos, lenguaje ubicuo, bounded contexts' },
          { label: 'CQRS:', text: 'Separaci√≥n clara entre lecturas y escrituras, optimizaci√≥n de queries' },
          { label: 'Event Sourcing:', text: 'Auditor√≠a completa, replay de eventos, reconstrucci√≥n de estado' },
          { label: 'Testing:', text: 'Importancia de tests en arquitecturas complejas, TDD en dominio' }
        ]
      }
    },
    stack: {
      title: 'Stack Tecnol√≥gico',
      infrastructure: 'Infraestructura'
    },
    cta: {
      title: '¬øBuscas alguien con expertise en arquitectura?',
      subtitle: 'Tengo experiencia en patrones avanzados y arquitecturas escalables. Hablemos.',
      button: 'Enviar Email'
    }
  },
  en: {
    back: '‚Üê Back to projects',
    badge: 'Side Project - Architecture',
    title: 'Task Manager with DDD',
    description: 'Task manager implemented with Domain-Driven Design, CQRS, and domain events. Educational project demonstrating advanced architectural patterns.',
    stats: {
      time: { value: '2 months', label: 'Development time' },
      aggregates: { value: '8', label: 'Domain aggregates' },
      coverage: { value: '100%', label: 'Test coverage' }
    },
    links: {
      demo: 'üåê View Live Demo',
      github: 'üíª View on GitHub'
    },
    problem: {
      title: 'The Problem',
      intro: 'I wanted to dive deep into Domain-Driven Design and advanced architectural patterns. I needed a project that would allow me to:',
      items: [
        'Apply DDD with aggregates, value objects, and domain entities',
        'Implement CQRS separating reads and writes',
        'Use domain events for communication between aggregates',
        'Implement specifications for complex queries',
        'Achieve 100% test coverage'
      ]
    },
    process: {
      title: 'My Process',
      phases: [
        {
          title: '1. Event Storming & Domain Modeling',
          description: 'I started by identifying domain events and aggregates:',
          details: [
            { name: 'Task Aggregate:', desc: 'Aggregate root with value objects (TaskId, Title, Description, Status)' },
            { name: 'Project Aggregate:', desc: 'Contains multiple tasks, manages lifecycle' },
            { name: 'Events:', desc: 'TaskCreated, TaskCompleted, TaskAssigned, ProjectArchived' }
          ]
        },
        {
          title: '2. Aggregate Implementation',
          description: 'I implemented aggregates with encapsulated business logic:',
          items: ['Immutable Value Objects (TaskStatus, Priority, etc.)', 'Domain methods that validate business rules', 'Domain event publishing', 'Repositories for persistence']
        },
        {
          title: '3. CQRS & Event Sourcing',
          description: 'I separated reads and writes with CQRS:',
          items: ['Commands for state changes (CreateTaskCommand, CompleteTaskCommand)', 'Queries for optimized reads (GetTasksByProjectQuery)', 'Event handlers that update read models', 'Projections for denormalized views']
        },
        {
          title: '4. Exhaustive Testing',
          description: 'I implemented tests at multiple levels:',
          items: ['Unit tests for aggregates and value objects', 'Domain tests for business rules', 'Integration tests for handlers and repositories', 'Specification tests for queries']
        }
      ]
    },
    solution: {
      title: 'The Solution',
      layers: {
        title: 'Layered Architecture',
        items: [
          { label: 'Domain Layer:', text: 'Aggregates, Value Objects, Repository interfaces, Domain events' },
          { label: 'Application Layer:', text: 'Commands, Queries, Handlers, DTOs, Mappers' },
          { label: 'Infrastructure Layer:', text: 'Repository implementations, Event Store, Projections' },
          { label: 'Presentation Layer:', text: 'Controllers, API endpoints, Input validations' }
        ]
      },
      patterns: {
        title: 'Implemented Patterns',
        items: [
          { name: 'Domain-Driven Design', desc: 'Aggregates, Value Objects, Specifications, Repositories' },
          { name: 'CQRS', desc: 'Commands and Queries separation, Read Models' },
          { name: 'Event Sourcing', desc: 'Event Store, Projections, Event replay' },
          { name: 'Mediator Pattern', desc: 'MediatR for handler orchestration' }
        ]
      },
      frontend: {
        title: 'Frontend - React',
        description: 'Modern interface with React and state management:',
        items: ['React Hooks for state management', 'Reusable functional components', 'Backend API integration', 'Drag & drop for task organization', 'Real-time filters and search']
      }
    },
    results: {
      title: 'Results & Impact',
      metrics: [
        { value: '100%', label: 'Test Coverage', color: 'purple' },
        { value: '8', label: 'Domain Aggregates', color: 'blue' },
        { value: '45+', label: 'Unit Tests', color: 'emerald' },
        { value: '0', label: 'Business rule violations', color: 'orange' }
      ],
      learnings: {
        title: 'Key Learnings',
        items: [
          { label: 'Deep DDD:', text: 'Complex domain modeling, ubiquitous language, bounded contexts' },
          { label: 'CQRS:', text: 'Clear separation between reads and writes, query optimization' },
          { label: 'Event Sourcing:', text: 'Complete audit trail, event replay, state reconstruction' },
          { label: 'Testing:', text: 'Importance of tests in complex architectures, TDD in domain' }
        ]
      }
    },
    stack: {
      title: 'Tech Stack',
      infrastructure: 'Infrastructure'
    },
    cta: {
      title: 'Looking for someone with architecture expertise?',
      subtitle: 'I have experience in advanced patterns and scalable architectures. Let\'s talk.',
      button: 'Send Email'
    }
  }
};

const content = t[lang];
---

<!doctype html>
<html lang={lang}>
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>{content.title} - Case Study</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" />
        <style>body { font-family: "Inter", sans-serif; }</style>
    </head>
    <body class="bg-white">
        <header class="sticky top-0 z-50 bg-white/80 backdrop-blur-md border-b border-gray-200">
            <div class="max-w-4xl mx-auto px-6 py-4 flex items-center justify-between">
                <a href="/" class="text-xl font-bold text-gray-900">MG<span class="text-blue-600">.</span></a>
                <a href={`/${lang}/landing/developer`} class="text-sm text-gray-600 hover:text-blue-600 transition">{content.back}</a>
            </div>
        </header>

        <main class="max-w-4xl mx-auto px-6 py-16">
            <section class="mb-16">
                <div class="mb-8">
                    <span class="px-4 py-2 bg-purple-50 text-purple-700 rounded-full text-sm font-semibold">{content.badge}</span>
                </div>
                <h1 class="text-5xl font-extrabold text-gray-900 mb-6">{content.title}</h1>
                <p class="text-xl text-gray-600 leading-relaxed mb-8">{content.description}</p>

                <div class="grid grid-cols-3 gap-4 mb-8">
                    <div class="bg-gray-50 rounded-lg p-4">
                        <div class="text-2xl font-bold text-purple-600">{content.stats.time.value}</div>
                        <div class="text-sm text-gray-600">{content.stats.time.label}</div>
                    </div>
                    <div class="bg-gray-50 rounded-lg p-4">
                        <div class="text-2xl font-bold text-purple-600">{content.stats.aggregates.value}</div>
                        <div class="text-sm text-gray-600">{content.stats.aggregates.label}</div>
                    </div>
                    <div class="bg-gray-50 rounded-lg p-4">
                        <div class="text-2xl font-bold text-purple-600">{content.stats.coverage.value}</div>
                        <div class="text-sm text-gray-600">{content.stats.coverage.label}</div>
                    </div>
                </div>

                <div class="flex flex-wrap gap-4">
                    <a href="https://taskmanager-demo.example.com" target="_blank" class="px-6 py-3 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700 transition">{content.links.demo}</a>
                    <a href="https://github.com/mauriciogdev/task-manager-ddd" target="_blank" class="px-6 py-3 border-2 border-gray-300 text-gray-900 rounded-lg font-semibold hover:border-purple-600 transition">{content.links.github}</a>
                </div>
            </section>

            <hr class="my-16" />

            <section class="mb-16">
                <h2 class="text-3xl font-bold text-gray-900 mb-6">{content.problem.title}</h2>
                <div class="bg-purple-50 rounded-xl p-8 border border-purple-200">
                    <p class="text-gray-700 leading-relaxed mb-4">{content.problem.intro}</p>
                    <ul class="space-y-3 text-gray-700">
                        {content.problem.items.map((item) => (
                            <li class="flex items-start gap-3">
                                <span class="text-purple-600 font-bold">‚Ä¢</span>
                                <span>{item}</span>
                            </li>
                        ))}
                    </ul>
                </div>
            </section>

            <section class="mb-16">
                <h2 class="text-3xl font-bold text-gray-900 mb-6">{content.process.title}</h2>
                <div class="space-y-8">
                    <div class="border-l-4 border-purple-600 pl-6">
                        <h3 class="text-xl font-bold text-gray-900 mb-3">{content.process.phases[0].title}</h3>
                        <p class="text-gray-600 mb-4">{content.process.phases[0].description}</p>
                        <div class="bg-gray-50 rounded-lg p-4 text-sm text-gray-700 space-y-2">
                            {content.process.phases[0].details?.map((d) => (
                                <div><strong>{d.name}</strong> {d.desc}</div>
                            ))}
                        </div>
                    </div>
                    {content.process.phases.slice(1).map((phase, idx) => {
                        const colors = ['border-blue-600', 'border-emerald-600', 'border-orange-600'];
                        return (
                            <div class={`border-l-4 ${colors[idx]} pl-6`}>
                                <h3 class="text-xl font-bold text-gray-900 mb-3">{phase.title}</h3>
                                <p class="text-gray-600 mb-4">{phase.description}</p>
                                <ul class="space-y-2 text-gray-700 text-sm">
                                    {phase.items?.map((item) => <li>‚úì {item}</li>)}
                                </ul>
                            </div>
                        );
                    })}
                </div>
            </section>

            <section class="mb-16">
                <h2 class="text-3xl font-bold text-gray-900 mb-6">{content.solution.title}</h2>
                <div class="space-y-8">
                    <div>
                        <h3 class="text-xl font-bold text-gray-900 mb-4">{content.solution.layers.title}</h3>
                        <div class="bg-gray-50 rounded-lg p-6 border border-gray-200">
                            <div class="space-y-4 text-sm text-gray-700">
                                {content.solution.layers.items.map((item) => (
                                    <div>
                                        <span class="font-semibold block mb-2">{item.label}</span>
                                        {item.text}
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-xl font-bold text-gray-900 mb-4">{content.solution.patterns.title}</h3>
                        <div class="grid md:grid-cols-2 gap-4">
                            {content.solution.patterns.items.map((p) => (
                                <div class="bg-gray-50 rounded-lg p-4 border border-gray-200">
                                    <div class="font-semibold text-gray-900 mb-2">{p.name}</div>
                                    <div class="text-sm text-gray-700">{p.desc}</div>
                                </div>
                            ))}
                        </div>
                    </div>
                    <div>
                        <h3 class="text-xl font-bold text-gray-900 mb-4">{content.solution.frontend.title}</h3>
                        <div class="bg-gray-50 rounded-lg p-6 border border-gray-200">
                            <p class="text-gray-700 mb-4">{content.solution.frontend.description}</p>
                            <div class="space-y-2 text-sm text-gray-700">
                                {content.solution.frontend.items.map((item) => <div>‚Ä¢ {item}</div>)}
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="mb-16">
                <h2 class="text-3xl font-bold text-gray-900 mb-6">{content.results.title}</h2>
                <div class="grid md:grid-cols-2 gap-6 mb-8">
                    {content.results.metrics.map((m) => (
                        <div class={`bg-gradient-to-br from-${m.color}-50 to-${m.color}-100 rounded-xl p-6 border border-${m.color}-200`}>
                            <div class={`text-3xl font-bold text-${m.color}-600 mb-2`}>{m.value}</div>
                            <div class="text-gray-700">{m.label}</div>
                        </div>
                    ))}
                </div>
                <div class="bg-gray-50 rounded-xl p-8 border border-gray-200">
                    <h3 class="text-xl font-bold text-gray-900 mb-4">{content.results.learnings.title}</h3>
                    <ul class="space-y-3 text-gray-700">
                        {content.results.learnings.items.map((item) => (
                            <li class="flex items-start gap-3">
                                <span class="text-purple-600 font-bold">‚úì</span>
                                <span><strong>{item.label}</strong> {item.text}</span>
                            </li>
                        ))}
                    </ul>
                </div>
            </section>

            <section class="mb-16">
                <h2 class="text-3xl font-bold text-gray-900 mb-6">{content.stack.title}</h2>
                <div class="grid md:grid-cols-3 gap-6">
                    <div class="bg-white rounded-xl p-6 border border-gray-200">
                        <h3 class="font-bold text-gray-900 mb-4">Backend</h3>
                        <div class="space-y-2 text-sm text-gray-700">
                            <div>‚Ä¢ .NET Core 8</div>
                            <div>‚Ä¢ C#</div>
                            <div>‚Ä¢ MediatR (CQRS)</div>
                            <div>‚Ä¢ Entity Framework Core</div>
                            <div>‚Ä¢ xUnit (Testing)</div>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl p-6 border border-gray-200">
                        <h3 class="font-bold text-gray-900 mb-4">Frontend</h3>
                        <div class="space-y-2 text-sm text-gray-700">
                            <div>‚Ä¢ React 18</div>
                            <div>‚Ä¢ TypeScript</div>
                            <div>‚Ä¢ React Query</div>
                            <div>‚Ä¢ Tailwind CSS</div>
                            <div>‚Ä¢ React Beautiful DnD</div>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl p-6 border border-gray-200">
                        <h3 class="font-bold text-gray-900 mb-4">{content.stack.infrastructure}</h3>
                        <div class="space-y-2 text-sm text-gray-700">
                            <div>‚Ä¢ PostgreSQL</div>
                            <div>‚Ä¢ Docker</div>
                            <div>‚Ä¢ GitHub Actions</div>
                            <div>‚Ä¢ Swagger/OpenAPI</div>
                            <div>‚Ä¢ SonarQube (Code Quality)</div>
                        </div>
                    </div>
                </div>
            </section>

            <section class="bg-gradient-to-r from-purple-600 to-blue-600 rounded-xl p-8 text-white text-center">
                <h2 class="text-2xl font-bold mb-4">{content.cta.title}</h2>
                <p class="text-purple-100 mb-6">{content.cta.subtitle}</p>
                <a href="mailto:mauriciogcode@gmail.com" class="inline-block px-6 py-3 bg-white text-purple-600 rounded-lg font-semibold hover:bg-purple-50 transition">{content.cta.button}</a>
            </section>
        </main>

        <footer class="bg-gray-900 text-white py-8 mt-20">
            <div class="max-w-4xl mx-auto px-6 text-center">
                <p class="text-gray-400 text-sm">¬© 2026 Mauricio Gonzalez - Full Stack Developer</p>
            </div>
        </footer>
    </body>
</html>
